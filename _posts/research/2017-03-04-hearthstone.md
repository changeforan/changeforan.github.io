---
layout: post
title: "炉石竞技场 我能混几场"
author: changeforan
category: research
tags: [algorithm, game]
---

![Alt text]({{ site.url }}/img/hearthstone.png)

某玩家沉迷炉石不能自拔，虽然实力只有贴吧水平。今天他提出了一个小问题：
>"如果我的胜率是50%，那我能在竞技场里赢几场？" 

竞技场的比赛规则很有意思：赢满12场或者输满3场即结束游戏。因此分别考虑这两种情况，设赢得比赛的概率为$Q$

###赢满12场的大神

####0负12胜的王者玩家
这种情况是最简单的，每场都赢，连赢12把
$$
P'_0 = Q^{12}
$$
####1负12胜的钻石玩家
共计13场比赛，其中最后一把为胜，前12场中不小心输了一把，共有12种输法


$$
P'_1 = 
$$

$$
C_{12}^1 \times Q^{12} \times (1-Q)
$$

####2负12胜的白金玩家
共计14场比赛，其中最后一把为胜，前13场中意外输了两场

$$
P'_2 = 
$$


$$
Q^{12} \times (1-Q)^2 \times C^2_{13}
$$

###输满3场的倔强青铜玩家
这些玩家有个共同特点，那就是最后一把输掉了饮恨离场，在此之前可能赢了$[0,11]$把，但已经输了2把。设赢了 $n$ 场，那么总共比赛 $n+3$，前 $n+2$场中赢了$n$场，有$C^n_{n+2}$种可能。

$$
P_n = 
$$

$$
Q^n \times (1-Q)^3 \times C^n_{n+2}
$$

综合以上所有情况，一个获胜概率为$Q$的玩家，在竞技场里的获胜数期望为


$$
E = 12 \times \sum_{i=0}^{2}P'_i +
$$

$$
 \sum_{n=0}^{11}n\times P_n
$$

当一个玩家是平均水平，即取 $ Q = 0.5 $，带入可得，$ E \approx 2.99 $ 这大概就是为啥3场比赛获胜的奖励和你的入场成本持平的原因吧。
